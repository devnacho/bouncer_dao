<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Electron Hello World!</title>
    <link rel="stylesheet" type="text/css" href="app.css"/>
  </head>
  <body>
      <div id="waiting-message">
          <p id="status">Please Tap Your Phone</p>
          <p class="tip">hint: open Bouncer mobile app and tap your phone here</p>
      </div>
      <div id="in-message">
          <p id="status">Come on In!</p>
      </div>
      <div id="out-message">
          <p id="status">You can't enter my friend!</p>
      </div>
    <script type="text/javascript">
     const {ipcRenderer} = require('electron')
     const $ = require('jQuery');

     let interval;
     $(document).ready(function() {
         interval = setInterval(function(){
             ipcRenderer.send('asynchronous-message', 'ping');
         }, 1000);
     })

     ipcRenderer.on('asynchronous-reply', (event, arg) => {
         console.log('Msg response received: ' + arg.allowed)
         clearInterval(interval)

         // update UI
         if (arg.allowed) {
             $('#waiting-message').hide()
             $('body').addClass('in-bg')
             $('#in-message').show()
         } else {
             $('#waiting-message').hide()
             $('body').addClass('out-bg')
             $('#out-message').show()
         }
     })
    </script>
  </body>
</html>
